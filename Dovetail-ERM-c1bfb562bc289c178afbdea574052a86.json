{"_id":"65e843a72476bc000a0002f1","components":[{"_id":"09f28a28-233c-4d95-bbf7-2a8e658d7590","_type":"SetHeadersComponent","expressions":[{"_id":"635f8a74ec569b0011000b5f","expression":"#{ERM_error_mail}","expressionType":"simple","name":"error_mail_tmp","nextNode":null},{"_id":"635f8a74ec569b0011000b60","expression":"${header.error_mail_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_mail","nextNode":null},{"_id":"635f8a74ec569b0011000b61","expression":"#{ERM_error_frequency}","expressionType":"simple","name":"error_frequency_tmp","nextNode":null},{"_id":"6373a4cdec569b00110019ba","expression":"${header.error_frequency_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_frequency","nextNode":null},{"_id":"63763f0bec569b000b002954","expression":"#{ERM_name}","expressionType":"simple","name":"name_tmp","nextNode":null},{"_id":"63763f0bec569b000b002955","expression":"${header.name_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"name","nextNode":null},{"_id":"63763f0bec569b000b002956","expression":"#{ERM_value}","expressionType":"simple","name":"value_tmp","nextNode":null},{"_id":"63763f0bec569b000b002957","expression":"${header.value_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"value","nextNode":null}],"flowComponentId":null,"note":{"text":"ERM User Definable Metrics","created_at":"2024-03-06T10:21:26.967Z","updated_at":"2024-03-06T10:21:26.967Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"previousEndpoint":"RightMiddle","previousNode":"d8c66af9-0835-4ad0-be8e-11bd4c3c558b","x":468,"y":204},{"_id":"e580b189-0bc7-4485-a984-4e723834964f","_type":"VelocityComponent","flowComponentId":null,"note":{"text":"SQL Query","created_at":"2024-03-06T10:21:26.967Z","updated_at":"2024-03-06T10:21:26.967Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"previousEndpoint":"RightMiddle","previousNode":"09f28a28-233c-4d95-bbf7-2a8e658d7590","template":"INSERT into #{MbE_DB_table} (timestamp,tenant,flow_name,error_message,error_body,error_class,error_mail,error_frequency,error_origin,environment,breadcrumbid,instance,flow_id,version,intercepted_endpoint,component_response_time,name,value) VALUES ('${header.timestamp}','${header.tenant}','${header.flow_name}','${header.error_message}',NULL,'${header.error_class}','${header.error_mail}','${header.error_frequency}','${header.error_origin}','${header.environment}','${header.breadcrumbid}','${header.instance}','${header.flow_id}','${header.version}','${header.intercepted_endpoint}','${header.component_response_time}','${header.name}','${header.value}')","x":576,"y":204},{"_id":"f7592f6f-9eb8-4f40-a71b-a169b574ac0f","_type":"ReplaceComponent","flags":null,"flowComponentId":null,"group":0,"groupCount":0,"note":null,"previousEndpoint":"RightMiddle","previousNode":"e580b189-0bc7-4485-a984-4e723834964f","regex":"'null_user_definable'","replaceWith":"NULL","x":684,"y":204},{"_id":"02075085-7323-4cd3-9d3e-d1d5d1a4e8a1","_type":"SQLComponent","database":"#{MbE_DB_name}","escapeChars":"false","flowComponentId":null,"host":"#{MbE_DB_host}","instance":null,"note":{"text":"SQL INSERT","created_at":"2024-03-06T10:21:26.968Z","updated_at":"2024-03-06T10:21:26.968Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"password":"#{MbE_DB_password}","port":"#{MbE_DB_port} ","previousEndpoint":"RightMiddle","previousNode":"f7592f6f-9eb8-4f40-a71b-a169b574ac0f","query":"${bodyAs(String)}","tlsVersion":"","type":"postgres","useSSL":"true","username":"#{MbE_DB_user}","x":792,"y":204},{"_id":"26a44357-e2d9-4d2b-b9c3-dc4897f9e6dd","_type":"ReplaceComponent","flags":null,"flowComponentId":null,"group":0,"groupCount":0,"note":null,"previousEndpoint":"RightMiddle","previousNode":"b255f7e9-e98c-49b1-a89d-d135ed554605","regex":"'null_user_definable'","replaceWith":"NULL","x":1224,"y":204},{"_id":"b255f7e9-e98c-49b1-a89d-d135ed554605","_type":"VelocityComponent","flowComponentId":null,"note":{"text":"SQL Query","created_at":"2024-03-06T10:21:26.968Z","updated_at":"2024-03-06T10:21:26.968Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"previousEndpoint":"RightMiddle","previousNode":"74d52832-abd5-48ed-88fc-8608f140a2f8","template":"UPDATE #{MbE_DB_table}  SET error_body='${header.error_body}' WHERE id='${header.id}'","x":1116,"y":204},{"_id":"74d52832-abd5-48ed-88fc-8608f140a2f8","_type":"SetHeadersComponent","expressions":[{"_id":"62bd8ef74c5c49000b000f65","expression":"//generatedKey","expressionType":"xpath","name":"id","nextNode":null},{"_id":"63da2436744d6a06bd000182","expression":"${exception.responseBody}","expressionType":"simple","name":"error_body_tmp","nextNode":null},{"_id":"62d802a8a328970010001027","expression":"${header.error_body_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_body","nextNode":null}],"flowComponentId":null,"note":{"text":"ERM HTTP Metrics","created_at":"2024-03-06T10:21:26.968Z","updated_at":"2024-03-06T10:21:26.968Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"previousEndpoint":"RightMiddle","previousNode":"10ead141-98ee-4f04-930c-a9284ea66db1","x":1008,"y":204},{"_id":"10ead141-98ee-4f04-930c-a9284ea66db1","_type":"FilterComponent","expression":"${header.error_class} == 'org.apache.camel.http.base.HttpOperationFailedException'","expressionType":"simple","flowComponentId":null,"note":{"text":"Filter HTTP Exceptions","created_at":"2024-03-06T10:21:26.968Z","updated_at":"2024-03-06T10:21:26.968Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"previousEndpoint":"RightMiddle","previousNode":"02075085-7323-4cd3-9d3e-d1d5d1a4e8a1","x":900,"y":204},{"_id":"348ec82f-2a58-47a3-842e-995742787040","_type":"SQLComponent","database":"#{MbE_DB_name}","escapeChars":"false","flowComponentId":null,"host":"#{MbE_DB_host}","instance":null,"note":null,"password":"#{MbE_DB_password}","port":"#{MbE_DB_port} ","previousEndpoint":"RightMiddle","previousNode":"26a44357-e2d9-4d2b-b9c3-dc4897f9e6dd","query":"${bodyAs(String)}","tlsVersion":"","type":"postgres","useSSL":"true","username":"#{MbE_DB_user}","x":1332,"y":204},{"_id":"d8c66af9-0835-4ad0-be8e-11bd4c3c558b","_type":"SetHeadersComponent","expressions":[{"_id":"635a692bec569b001400084b","expression":"${exception.class}","expressionType":"simple","name":"error_class","nextNode":null},{"_id":"635a91c5ec569b0011000918","expression":"${exception.message}","expressionType":"simple","name":"error_message_tmp","nextNode":null},{"_id":"635a9924ec569b0011000aa6","expression":"${header.error_message_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_message","nextNode":null},{"_id":"62bd8ef74c5c49000b000f66","expression":"${date-with-timezone:now:Europe/Amsterdam:yyyy-MM-dd HH:mm:ss}","expressionType":"simple","name":"timestamp_tmp","nextNode":null},{"_id":"62d802a8a328970010001028","expression":"${header.timestamp_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"timestamp","nextNode":null},{"_id":"62bd93064c5c490014000f72","expression":"${header.breadcrumbId}","expressionType":"simple","name":"breadcrumbid_tmp","nextNode":null},{"_id":"62d802a8a328970010001029","expression":"${header.breadcrumbId.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"breadcrumbid","nextNode":null},{"_id":"62bda4574c5c49000b000fe1","expression":"${header.User-Agent.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"version_tmp","nextNode":null},{"_id":"62d802a8a32897001000102c","expression":"${header.version_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"version","nextNode":null},{"_id":"62bdac384c5c490014001063","expression":"${header.CamelInterceptedEndpoint}","expressionType":"simple","name":"intercepted_endpoint_tmp","nextNode":null},{"_id":"62d802a8a32897001000102d","expression":"${header.intercepted_endpoint_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"intercepted_endpoint","nextNode":null},{"_id":"62c2944b4c5c490011000f14","expression":"${header.ComponentResponseTime}","expressionType":"simple","name":"component_response_time_tmp","nextNode":null},{"_id":"62d802a8a32897001000102e","expression":"${header.component_response_time_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"component_response_time","nextNode":null},{"_id":"62d802a8a32897001000102f","expression":"#{self.tenant}","expressionType":"simple","name":"tenant_tmp","nextNode":null},{"_id":"62d802a8a328970010001030","expression":"${header.tenant_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"tenant","nextNode":null},{"_id":"62d802a8a328970010001031","expression":"#{self.server}","expressionType":"simple","name":"instance_tmp","nextNode":null},{"_id":"62d802a8a328970010001032","expression":"${header.instance_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"instance","nextNode":null},{"_id":"62d802a8a328970010001033","expression":"#{self.environment}","expressionType":"simple","name":"environment_tmp","nextNode":null},{"_id":"62d802a8a328970010001034","expression":"${header.environment_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"environment","nextNode":null},{"_id":"62d802a8a328970010001035","expression":"#{self.flow_id}","expressionType":"simple","name":"flow_id_tmp","nextNode":null},{"_id":"62d802a8a328970010001036","expression":"${header.flow_id_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"flow_id","nextNode":null},{"_id":"62d802a8a328970010001037","expression":"#{self.flow_name}","expressionType":"simple","name":"flow_name_tmp","nextNode":null},{"_id":"62d802a8a328970010001038","expression":"${header.flow_name_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"flow_name","nextNode":null},{"_id":"6373a4cdec569b00110019bb","expression":"ERM","expressionType":"constant","name":"error_origin","nextNode":null}],"flowComponentId":null,"note":{"text":"ERM Metrics","created_at":"2024-03-06T10:21:26.967Z","updated_at":"2024-03-06T10:21:26.967Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"previousEndpoint":"","previousNode":"","x":360,"y":204}],"created_at":null,"error_components":[{"_id":"d43b5be7-d7c0-4f9f-9ab4-e8d4f1a5e0e8","_type":"FailedExchangeComponent","flowComponentId":null,"note":null,"previousEndpoint":null,"previousNode":"","redeliveryAttempts":"0","redeliveryInterval":"5000","x":400,"y":300}],"flow_group_id":"65d743f73342af000b00001b","flow_properties":[{"_id":"6613d92a71963d001c00011e","is_meta":false,"name":"ERM_error_frequency","values":[{"_id":"6613d92a71963d001c00011f","encrypted":true,"environment":"test","last_update":null,"nonce":"bVqD/EjSBUzM5iXVA1ffYcHaL6rzI/uE\n","updatedBy":null,"value":"null_user_definable"},{"_id":"6613d92a71963d001c000120","encrypted":true,"environment":"production","last_update":null,"nonce":"XhGI+o1KG+mq6VWqQnRpgd8Fsa+oFTx1\n","updatedBy":null,"value":"null_user_definable"}]},{"_id":"6613d92a71963d001c000121","is_meta":false,"name":"ERM_error_mail","values":[{"_id":"6613d92a71963d001c000122","encrypted":true,"environment":"test","last_update":null,"nonce":"U3nCVfE5QfMOsi7SiGXyNQyf4Nw5NhIe\n","updatedBy":null,"value":"null_user_definable"},{"_id":"6613d92a71963d001c000123","encrypted":true,"environment":"production","last_update":null,"nonce":"ILdMVe1j8+o3adOLvN/e0WWdBhc1yjL4\n","updatedBy":null,"value":"null_user_definable"}]},{"_id":"6613d92a71963d001c000124","is_meta":false,"name":"ERM_name","values":[{"_id":"6613d92a71963d001c000125","encrypted":true,"environment":"test","last_update":null,"nonce":"T8HwWQWdRdIPqnlG/qHOeah/VyICJrwW\n","updatedBy":null,"value":"null_user_definable"},{"_id":"6613d92a71963d001c000126","encrypted":true,"environment":"production","last_update":null,"nonce":"9ZOiICfEAIMXTnWZCLMM9xB1wHKXJucQ\n","updatedBy":null,"value":"null_user_definable"}]},{"_id":"6613d92a71963d001c000127","is_meta":false,"name":"ERM_value","values":[{"_id":"6613d92a71963d001c000128","encrypted":true,"environment":"test","last_update":null,"nonce":"lkXyYwboqittr5c/kBXn48VblbKCL87y\n","updatedBy":null,"value":"null_user_definable"},{"_id":"6613d92a71963d001c000129","encrypted":true,"environment":"production","last_update":null,"nonce":"86cYGEbyvSX2jzaP4hI4t7pzsXImuVlN\n","updatedBy":null,"value":"null_user_definable"}]},{"_id":"6613d92a71963d001c00012a","is_meta":false,"name":"MbE_DB_host","values":[{"_id":"6613d92a71963d001c00012b","encrypted":true,"environment":"test","last_update":null,"nonce":"jCjybEL1pyrJN5HjJyunGQcTSQ7NfeOU\n","updatedBy":null,"value":"DB_host"},{"_id":"6613d92a71963d001c00012c","encrypted":true,"environment":"production","last_update":null,"nonce":"fKZU4JpfMw3gzH8JN72UmWmDKVu0vWxa\n","updatedBy":null,"value":"DB_host"}]},{"_id":"6613d92a71963d001c00012d","is_meta":false,"name":"MbE_DB_name","values":[{"_id":"6613d92a71963d001c00012e","encrypted":true,"environment":"test","last_update":null,"nonce":"id0ZHOWUkJ00xEXjbSjvnBroC8EPrvpc\n","updatedBy":null,"value":"DB_name"},{"_id":"6613d92a71963d001c00012f","encrypted":true,"environment":"production","last_update":null,"nonce":"YJ3Yk28BvxGGDcKTJCLAeuH5GAnNJ/04\n","updatedBy":null,"value":"DB_name"}]},{"_id":"6613d92a71963d001c000130","is_meta":false,"name":"MbE_DB_password","values":[{"_id":"6613d92a71963d001c000131","encrypted":true,"environment":"test","last_update":null,"nonce":"47/JKgbTJyhBn/vj7YYDxzvGOpw2z0fd\n","updatedBy":null,"value":"DB_password"},{"_id":"6613d92a71963d001c000132","encrypted":true,"environment":"production","last_update":null,"nonce":"gI2zAAG5Ov5nrrD9mv2KGOSOplhYaIo4\n","updatedBy":null,"value":"DB_password"}]},{"_id":"6613d92a71963d001c000133","is_meta":false,"name":"MbE_DB_port","values":[{"_id":"6613d92a71963d001c000134","encrypted":true,"environment":"test","last_update":null,"nonce":"BCyToalBZsLufiGbHHPwTlyXVr6prgis\n","updatedBy":null,"value":"DB_port"},{"_id":"6613d92a71963d001c000135","encrypted":true,"environment":"production","last_update":null,"nonce":"YBzNcxO+PqiuXmD81AsRzZMSfSotJOam\n","updatedBy":null,"value":"DB_port"}]},{"_id":"6613d92a71963d001c000136","is_meta":false,"name":"MbE_DB_table","values":[{"_id":"6613d92a71963d001c000137","encrypted":true,"environment":"test","last_update":null,"nonce":"E6AY99+iacn8uCzwa7Oa4qyJw90c7BQ0\n","updatedBy":null,"value":"DB_table"},{"_id":"6613d92a71963d001c000138","encrypted":true,"environment":"production","last_update":null,"nonce":"7gaSVaRIIT/jrgDfwZIzqK2ZaX7w6V8c\n","updatedBy":null,"value":"DB_table"}]},{"_id":"6613d92a71963d001c000139","is_meta":false,"name":"MbE_DB_user","values":[{"_id":"6613d92a71963d001c00013a","encrypted":true,"environment":"test","last_update":null,"nonce":"cWCSh47sKYzlBE6a+HVg/US/eAWBYQxx\n","updatedBy":null,"value":"DB_user"},{"_id":"6613d92a71963d001c00013b","encrypted":true,"environment":"production","last_update":null,"nonce":"aFQcyIuR2uOC1HmV+EBWDE4rGy78AFmd\n","updatedBy":null,"value":"DB_user"}]}],"icon":"<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 20010904//EN\"\n \"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\"\n width=\"500.000000pt\" height=\"500.000000pt\" viewBox=\"0 0 500.000000 500.000000\"\n preserveAspectRatio=\"xMidYMid meet\">\n\n<g transform=\"translate(0.000000,500.000000) scale(0.100000,-0.100000)\"\nfill=\"#000000\" stroke=\"none\">\n<path d=\"M0 2500 l0 -2500 2500 0 2500 0 0 2500 0 2500 -2500 0 -2500 0 0\n-2500z m1260 1105 l0 -135 -255 0 -255 0 0 -260 0 -260 205 0 205 0 0 -135 0\n-135 -205 0 -205 0 0 -270 0 -270 255 0 255 0 0 -135 0 -135 -400 0 -400 0 0\n935 0 935 400 0 400 0 0 -135z m1127 124 c254 -34 345 -188 330 -559 -7 -194\n-49 -295 -146 -361 l-39 -26 51 -34 c41 -27 59 -47 84 -99 44 -87 53 -157 53\n-410 0 -193 7 -295 25 -351 6 -18 -1 -19 -144 -19 l-150 0 -11 38 c-7 21 -15\n157 -18 322 -6 262 -9 288 -27 320 -33 54 -75 73 -177 78 l-88 4 0 -381 0\n-381 -145 0 -145 0 0 935 0 935 234 0 c129 0 270 -5 313 -11z m1333 6 c0 -14\n201 -1245 208 -1269 5 -21 34 148 101 595 51 343 96 636 98 652 l6 27 203 0\n204 0 0 -935 0 -935 -140 0 -140 0 -2 635 -3 635 -96 -632 -95 -633 -141 -3\n-141 -3 -12 73 c-7 40 -54 323 -105 628 l-93 555 -1 -627 -1 -628 -130 0 -130\n0 0 935 0 935 205 0 c113 0 205 -2 205 -5z\"/>\n<path d=\"M2130 3185 l0 -285 83 0 c100 0 157 22 184 72 16 29 18 58 18 220 0\n173 -2 189 -21 215 -35 47 -78 63 -176 63 l-88 0 0 -285z\"/>\n</g>\n</svg>\n","icon_name":"ERM.svg","isFlowComponent":true,"lock_user_id":"59565f3fbb0c38660ebe2bd6","name":"ERM","note":{"text":"This is a reusable, custom build component used to monitor the functioning of a flow and log information about it's functioning to an SQL database.","updated_at":"2024-04-08T11:46:50.621Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"request_timeout":20000,"tracing_ttl":null,"transport":"direct","trashed":false,"updated_at":"2024-04-08T11:46:50.952+00:00","updated_by":"Super Admin","bundle_id":"ID_65e843a72476bc000a0002f1","lockUserName":"Super Admin","lockCurrentUserCanEdit":null}