{"_id":"65d7443a3342af000b0000bc","components":[{"_id":"78aceab1-5d85-4fbf-8ef8-9a048334c1de","_type":"SetHeadersComponent","expressions":[{"_id":"635a692bec569b001400084b","expression":"${date-with-timezone:now:Europe/Amsterdam:yyyy-MM-dd HH:mm:ss}","expressionType":"simple","name":"timestamp_tmp","nextNode":null},{"_id":"63da669c744d6a06bd0009fa","expression":"${header.timestamp_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"timestamp","nextNode":null},{"_id":"63da669c744d6a06bd0009fb","expression":"${header.CamelHttpResponseCode}: ${header.CamelHttpResponseText}","expressionType":"simple","name":"error_class_tmp","nextNode":null},{"_id":"637c87dfec569b000e003340","expression":"${header.error_class_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_class","nextNode":null},{"_id":"635a91c5ec569b0011000918","expression":"${header.url} with statusCode: ${header.CamelHttpResponseCode}","expressionType":"simple","name":"error_message_tmp","nextNode":null},{"_id":"635a9924ec569b0011000aa6","expression":"${header.error_message_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_message","nextNode":null},{"_id":"637b7d73ec569b0014003213","expression":"${bodyAs(String)}","expressionType":"simple","name":"error_body_tmp","nextNode":null},{"_id":"637b7d73ec569b0014003214","expression":"${header.error_body_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_body","nextNode":null},{"_id":"62bd93064c5c490014000f72","expression":"${header.breadcrumbId}","expressionType":"simple","name":"breadcrumbid_tmp","nextNode":null},{"_id":"62d802a8a328970010001029","expression":"${header.breadcrumbId_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"breadcrumbid","nextNode":null},{"_id":"62bda4574c5c49000b000fe1","expression":"${header.User-Agent.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"version_tmp","nextNode":null},{"_id":"62d802a8a32897001000102c","expression":"${header.version_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"version","nextNode":null},{"_id":"63da669c744d6a06bd0009fc","expression":"${header.CamelInterceptedEndpoint}","expressionType":"simple","name":"intercepted_endpoint_tmp","nextNode":null},{"_id":"63da669c744d6a06bd0009fd","expression":"${header.intercepted_endpoint_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"intercepted_endpoint","nextNode":null},{"_id":"62d802a8a32897001000102f","expression":"#{self.tenant}","expressionType":"simple","name":"tenant_tmp","nextNode":null},{"_id":"62d802a8a328970010001030","expression":"${header.tenant_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"tenant","nextNode":null},{"_id":"62d802a8a328970010001031","expression":"#{self.server}","expressionType":"simple","name":"instance_tmp","nextNode":null},{"_id":"62d802a8a328970010001032","expression":"${header.instance_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"instance","nextNode":null},{"_id":"62d802a8a328970010001033","expression":"#{self.environment}","expressionType":"simple","name":"environment_tmp","nextNode":null},{"_id":"62d802a8a328970010001034","expression":"${header.environment_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"environment","nextNode":null},{"_id":"62d802a8a328970010001035","expression":"#{self.flow_id}","expressionType":"simple","name":"flow_id_tmp","nextNode":null},{"_id":"62d802a8a328970010001036","expression":"${header.flow_id_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"flow_id","nextNode":null},{"_id":"62d802a8a328970010001037","expression":"#{self.flow_name}","expressionType":"simple","name":"flow_name_tmp","nextNode":null},{"_id":"62d802a8a328970010001038","expression":"${header.flow_name_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"flow_name","nextNode":null},{"_id":"6373a4cdec569b00110019bb","expression":"FFM","expressionType":"constant","name":"error_origin","nextNode":null}],"flowComponentId":null,"note":{"text":"FFM Metrics","created_at":"2024-02-22T12:55:08.028Z","updated_at":"2024-02-22T12:55:08.028Z","updated_by":"651a8cf57ac07c029100054f"},"previousEndpoint":"","previousNode":"","x":300,"y":96},{"_id":"f3f7a319-55d4-4436-8d12-54a3104db0f2","_type":"SetHeadersComponent","expressions":[{"_id":"635f8a74ec569b0011000b5f","expression":"#{FFM_error_mail}","expressionType":"simple","name":"error_mail_tmp","nextNode":null},{"_id":"635f8a74ec569b0011000b60","expression":"${header.error_mail_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_mail","nextNode":null},{"_id":"635f8a74ec569b0011000b61","expression":"#{FFM_error_frequency}","expressionType":"simple","name":"error_frequency_tmp","nextNode":null},{"_id":"6373a4cdec569b00110019ba","expression":"${header.error_frequency_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"error_frequency","nextNode":null},{"_id":"63763f0bec569b000b002954","expression":"#{FFM_name}","expressionType":"simple","name":"name_tmp","nextNode":null},{"_id":"63763f0bec569b000b002955","expression":"${header.name_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"name","nextNode":null},{"_id":"63763f0bec569b000b002956","expression":"#{FFM_value}","expressionType":"simple","name":"value_tmp","nextNode":null},{"_id":"63763f0bec569b000b002957","expression":"${header.value_tmp.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"value","nextNode":null}],"flowComponentId":null,"note":{"text":"FFM User Definable Metrics","created_at":"2024-02-22T12:55:08.028Z","updated_at":"2024-02-22T12:55:08.028Z","updated_by":"651a8cf57ac07c029100054f"},"previousEndpoint":"RightMiddle","previousNode":"78aceab1-5d85-4fbf-8ef8-9a048334c1de","x":408,"y":96},{"_id":"0704aea9-ff8e-41d2-9124-7714ec8c0803","_type":"VelocityComponent","flowComponentId":null,"note":{"text":"SQL Query","created_at":"2024-02-22T12:55:08.028Z","updated_at":"2024-02-22T12:55:08.028Z","updated_by":"651a8cf57ac07c029100054f"},"previousEndpoint":"RightMiddle","previousNode":"f3f7a319-55d4-4436-8d12-54a3104db0f2","template":"INSERT into #{DB_table} (timestamp,tenant,flow_name,error_message,error_body,error_class,error_mail,error_frequency,error_origin,environment,breadcrumbid,instance,flow_id,version,intercepted_endpoint,name,value) VALUES ('${header.timestamp}','${header.tenant}','${header.flow_name}','${header.error_message}','${header.error_body}','${header.error_class}','${header.error_mail}','${header.error_frequency}','${header.error_origin}','${header.environment}','${header.breadcrumbid}','${header.instance}','${header.flow_id}','${header.version}','${header.intercepted_endpoint}','${header.name}','${header.value}')","x":516,"y":96},{"_id":"5dd9857b-87cb-4ca8-8817-e1c4beeb6ea4","_type":"ReplaceComponent","flags":null,"flowComponentId":null,"group":0,"groupCount":0,"note":{"text":"Clean up the SQL query so empty data is inserted correctly","updated_at":"2023-06-20T15:13:07.664Z","updated_by":"6200e27126e2ce2d26002cd0","_id":"083f5fbf-207b-4eba-968e-653c88f92658","created_at":"2023-06-20T15:10:21.867Z"},"previousEndpoint":"RightMiddle","previousNode":"0704aea9-ff8e-41d2-9124-7714ec8c0803","regex":"'null_user_definable'","replaceWith":"NULL","x":624,"y":96},{"_id":"8df831d9-7c67-4fde-a461-0b4dd9b79eaa","_type":"SQLComponent","database":"#{DB_name}","escapeChars":"false","flowComponentId":null,"host":"#{DB_host}","instance":"","note":{"text":"SQL INSERT","created_at":"2024-02-22T12:55:08.028Z","updated_at":"2024-02-22T12:55:08.028Z","updated_by":"651a8cf57ac07c029100054f"},"password":"#{DB_password}","port":"#{DB_port}","previousEndpoint":"RightMiddle","previousNode":"5dd9857b-87cb-4ca8-8817-e1c4beeb6ea4","query":"${bodyAs(String)}","tlsVersion":"","type":"postgres","useSSL":"false","username":"#{DB_user}","x":732,"y":96},{"_id":"0f1a5463-3a5a-4161-860b-dd83b19e9d2b","_type":"FilterComponent","expression":"${header.Set_ComponentResponseTime} != null","expressionType":"simple","flowComponentId":null,"note":{"text":"Filter Exceptions with Set_ComponentResponseTime","created_at":"2024-02-22T12:55:08.028Z","updated_at":"2024-04-08T11:52:41.545Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"previousEndpoint":"RightMiddle","previousNode":"8df831d9-7c67-4fde-a461-0b4dd9b79eaa","x":840,"y":96},{"_id":"7c7cb652-1a93-44cc-8066-e9f2b38abc05","_type":"SetHeadersComponent","expressions":[{"_id":"63da669c744d6a06bd000a00","expression":"//generatedKey","expressionType":"xpath","name":"id","nextNode":null},{"_id":"63da6aa2744d6a06b8000958","expression":"${header.Set_ComponentResponseTime.replaceAll(\"\\'\",\"\\'\\'\")}","expressionType":"simple","name":"component_response_time","nextNode":null}],"flowComponentId":null,"note":{"text":"FFM Metrics","created_at":"2024-02-22T12:55:08.028Z","updated_at":"2024-02-22T12:55:08.028Z","updated_by":"651a8cf57ac07c029100054f"},"previousEndpoint":"RightMiddle","previousNode":"0f1a5463-3a5a-4161-860b-dd83b19e9d2b","x":948,"y":96},{"_id":"3e54dd00-85d1-4e11-b076-12843ab3d074","_type":"SQLComponent","database":"#{DB_name}","escapeChars":"false","flowComponentId":null,"host":"#{DB_host}","instance":"","note":{"text":"SQL UPDATE","created_at":"2024-02-22T12:55:08.028Z","updated_at":"2024-02-22T12:55:08.028Z","updated_by":"651a8cf57ac07c029100054f"},"password":"#{DB_password}","port":"#{DB_port}","previousEndpoint":"RightMiddle","previousNode":"1b78ffb3-ca50-409d-b867-4e3d8db938b8","query":"${bodyAs(String)}","tlsVersion":"","type":"postgres","useSSL":"true","username":"#{DB_user}","x":1272,"y":96},{"_id":"1b78ffb3-ca50-409d-b867-4e3d8db938b8","_type":"ReplaceComponent","flags":null,"flowComponentId":null,"group":0,"groupCount":0,"note":{"text":"Clean up the SQL query so empty data is inserted correctly","updated_at":"2023-06-20T15:13:12.056Z","updated_by":"6200e27126e2ce2d26002cd0","_id":"512a2925-0484-4828-b055-ae3e1d38089d","created_at":"2023-06-20T15:13:12.056Z"},"previousEndpoint":"RightMiddle","previousNode":"f33c69ec-3732-421e-ac80-35f91c64c531","regex":"'null_user_definable'","replaceWith":"NULL","x":1164,"y":96},{"_id":"f33c69ec-3732-421e-ac80-35f91c64c531","_type":"VelocityComponent","flowComponentId":null,"note":{"text":"SQL Query","created_at":"2024-02-22T12:55:08.028Z","updated_at":"2024-02-22T12:55:08.028Z","updated_by":"651a8cf57ac07c029100054f"},"previousEndpoint":"RightMiddle","previousNode":"7c7cb652-1a93-44cc-8066-e9f2b38abc05","template":"UPDATE #{DB_table} SET component_response_time='${header.component_response_time}' WHERE id='${header.id}'","x":1056,"y":96}],"created_at":null,"error_components":[{"_id":"53575d46-1940-496c-aecf-400da7a558c2","_type":"FailedExchangeComponent","flowComponentId":null,"note":null,"previousEndpoint":null,"previousNode":"","redeliveryAttempts":"0","redeliveryInterval":"5000","x":112,"y":252}],"flow_group_id":"65d743f73342af000b00001b","flow_properties":[{"_id":"6613da9071963d00160000c1","is_meta":false,"name":"DB_host","values":[{"_id":"6613da9071963d00160000c2","encrypted":true,"environment":"test","last_update":null,"nonce":"Ctco+DLogVTJ2p1C8PiXOgEBQdmYeGab\n","updatedBy":null,"value":"DB_host"},{"_id":"6613da9071963d00160000c3","encrypted":true,"environment":"production","last_update":null,"nonce":"A2EWIDd3a27RlC9HRxJgKVtyudnRlCmA\n","updatedBy":null,"value":"DB_host"}]},{"_id":"6613da9071963d00160000c4","is_meta":false,"name":"DB_name","values":[{"_id":"6613da9071963d00160000c5","encrypted":true,"environment":"test","last_update":null,"nonce":"JANa0JA4EZKNeVyIBXi2PRPc2Fuv70KX\n","updatedBy":null,"value":"DB_name"},{"_id":"6613da9071963d00160000c6","encrypted":true,"environment":"production","last_update":null,"nonce":"mKXh2i43GjKEuFlukuED6F8mGSctEFh/\n","updatedBy":null,"value":"DB_name"}]},{"_id":"6613da9071963d00160000c7","is_meta":false,"name":"DB_password","values":[{"_id":"6613da9071963d00160000c8","encrypted":true,"environment":"test","last_update":null,"nonce":"AmX8XMFj0dIyL6hda28LFx7jFhDU0h47\n","updatedBy":null,"value":"DB_password"},{"_id":"6613da9071963d00160000c9","encrypted":true,"environment":"production","last_update":null,"nonce":"N1+7EE3INHvEJxtnv2QMAvJADS+OFfKc\n","updatedBy":null,"value":"DB_password"}]},{"_id":"6613da9071963d00160000ca","is_meta":false,"name":"DB_port","values":[{"_id":"6613da9071963d00160000cb","encrypted":true,"environment":"test","last_update":null,"nonce":"xvPGkoWKkXwdIGd/Zcs9xqXEYS3yYrsb\n","updatedBy":null,"value":"DB_port"},{"_id":"6613da9071963d00160000cc","encrypted":true,"environment":"production","last_update":null,"nonce":"iwRot75ySMqhV4sirHL1Yr7/Gi7TELrU\n","updatedBy":null,"value":"DB_post"}]},{"_id":"6613da9071963d00160000cd","is_meta":false,"name":"DB_table","values":[{"_id":"6613da9071963d00160000ce","encrypted":true,"environment":"test","last_update":null,"nonce":"HQTLCegkZiM9MnI85kX3dYBwpMYEt3lh\n","updatedBy":null,"value":"DB_table"},{"_id":"6613da9071963d00160000cf","encrypted":true,"environment":"production","last_update":null,"nonce":"Q1+E+Nczh5gyj1rxspliP9TBVepn9kXx\n","updatedBy":null,"value":"DB_table"}]},{"_id":"6613da9071963d00160000d0","is_meta":false,"name":"DB_user","values":[{"_id":"6613da9071963d00160000d1","encrypted":true,"environment":"test","last_update":null,"nonce":"OQNfunwa5k7Gq5/m9Xie20jTQgk46HYj\n","updatedBy":null,"value":"DB_user"},{"_id":"6613da9071963d00160000d2","encrypted":true,"environment":"production","last_update":null,"nonce":"qYyqQTflyx9dvzCWLYC38xKE395MjdSm\n","updatedBy":null,"value":"DB_user"}]},{"_id":"6613da9071963d00160000d3","is_meta":false,"name":"FFM_error_frequency","values":[{"_id":"6613da9071963d00160000d4","encrypted":true,"environment":"test","last_update":null,"nonce":"qTqQQaUIkEIC3FB9BAPrr08LMGVv3SlD\n","updatedBy":null,"value":"null_user_definable"},{"_id":"6613da9071963d00160000d5","encrypted":true,"environment":"production","last_update":null,"nonce":"YCYTw8f6mY6ROKtwSCa0zpu8YEBU58Z3\n","updatedBy":null,"value":"null_user_definable"}]},{"_id":"6613da9071963d00160000d6","is_meta":false,"name":"FFM_error_mail","values":[{"_id":"6613da9071963d00160000d7","encrypted":true,"environment":"test","last_update":null,"nonce":"O3QD7GHXxBTNbcbHVF7WcSlfMfWFdwaO\n","updatedBy":null,"value":"null_user_definable"},{"_id":"6613da9071963d00160000d8","encrypted":true,"environment":"production","last_update":null,"nonce":"eH6CNcVzL18dTER3tYLl3wQ9AiPHEgFi\n","updatedBy":null,"value":"null_user_definable"}]},{"_id":"6613da9071963d00160000d9","is_meta":false,"name":"FFM_name","values":[{"_id":"6613da9071963d00160000da","encrypted":true,"environment":"test","last_update":null,"nonce":"dk645kostwkIWyU7S4LWa3O4XDEAdsSE\n","updatedBy":null,"value":"null_user_definable"},{"_id":"6613da9071963d00160000db","encrypted":true,"environment":"production","last_update":null,"nonce":"IVdLgHkHDmS1cECn1HDHSrs5aSuZeNJg\n","updatedBy":null,"value":"null_user_definable"}]},{"_id":"6613da9071963d00160000dc","is_meta":false,"name":"FFM_value","values":[{"_id":"6613da9071963d00160000dd","encrypted":true,"environment":"test","last_update":null,"nonce":"cFyUFzdh9gO0BX+ItKfe/1aveIa7cKEt\n","updatedBy":null,"value":"null_user_definable"},{"_id":"6613da9071963d00160000de","encrypted":true,"environment":"production","last_update":null,"nonce":"M8PRTEb7bIwM1o7Xxf3DuwdHvvCnAj4M\n","updatedBy":null,"value":"null_user_definable"}]}],"icon":"<?xml version=\"1.0\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 20010904//EN\"\n \"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd\">\n<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\"\n width=\"500.000000pt\" height=\"500.000000pt\" viewBox=\"0 0 500.000000 500.000000\"\n preserveAspectRatio=\"xMidYMid meet\">\n\n<g transform=\"translate(0.000000,500.000000) scale(0.100000,-0.100000)\"\nfill=\"#000000\" stroke=\"none\">\n<path d=\"M0 2500 l0 -2500 2500 0 2500 0 0 2500 0 2500 -2500 0 -2500 0 0\n-2500z m1350 1105 l0 -135 -245 0 -245 0 0 -280 0 -280 190 0 190 0 0 -135 0\n-135 -190 0 -190 0 0 -385 0 -385 -145 0 -145 0 0 935 0 935 390 0 390 0 0\n-135z m1310 0 l0 -135 -240 0 -240 0 0 -280 0 -280 190 0 190 0 0 -135 0 -135\n-190 0 -190 0 0 -385 0 -385 -150 0 -150 0 0 935 0 935 390 0 390 0 0 -135z\nm950 130 c0 -14 201 -1245 208 -1269 5 -21 34 148 101 595 51 343 96 636 98\n652 l6 27 203 0 204 0 0 -935 0 -935 -140 0 -140 0 -2 635 -3 635 -96 -632\n-95 -633 -141 -3 -141 -3 -12 73 c-7 40 -54 323 -105 628 l-93 555 -1 -627 -1\n-628 -130 0 -130 0 0 935 0 935 205 0 c113 0 205 -2 205 -5z\"/>\n</g>\n</svg>\n","icon_name":"FFM.svg","isFlowComponent":true,"lock_user_id":"59565f3fbb0c38660ebe2bd6","name":"FFM","note":{"text":"[]","updated_at":"2024-04-08T11:52:48.381Z","updated_by":"59565f3fbb0c38660ebe2bd6"},"request_timeout":20000,"tracing_ttl":3600,"transport":"direct","trashed":false,"updated_at":"2024-04-08T11:52:48.720+00:00","updated_by":"Super Admin","bundle_id":"ID_65d7443a3342af000b0000bc","lockUserName":"Super Admin","lockCurrentUserCanEdit":null}